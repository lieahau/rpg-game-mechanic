System.register("chunks:///_virtual/baseItemUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameEvents.ts"],(function(t){var e,n,o,i,s,c,E;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,i=t.Node,s=t.director,c=t.Component},function(t){E=t.GlobalGameEvents}],execute:function(){var r;n._RF.push({},"ebfb4F7BGhI9rtCxQWcJB7q","baseItemUI",void 0);var u=o.ccclass;t("BaseItemUI",u("BaseItemUI")(r=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.onLoad=function(){this.node.on(i.EventType.MOUSE_ENTER,this.onMouseEnter,this),this.node.on(i.EventType.MOUSE_LEAVE,this.onMouseLeave,this),this.node.on(i.EventType.TOUCH_START,this.onClick,this)},o.onDestroy=function(){this.node.off(i.EventType.MOUSE_ENTER,this.onMouseEnter,this),this.node.off(i.EventType.MOUSE_LEAVE,this.onMouseLeave,this),this.node.off(i.EventType.TOUCH_START,this.onClick,this)},o.onClick=function(){s.emit(E.ITEM_CLICK,this.getData(),this.getDetailContent())},o.onMouseEnter=function(t){s.emit(E.ITEM_HOVER_ENTER,t.getUILocation(),this.getTooltipContent())},o.onMouseLeave=function(t){s.emit(E.ITEM_HOVER_LEAVE,t.getUILocation(),this.getTooltipContent())},o.getTooltipContent=function(){return"Unknown Item"},o.getDetailContent=function(){return"Unknown Item"},n}(c))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/baseStats.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,n;return{setters:[function(t){i=t.extends},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"69755CKVsxIB6ysfuq+dirR","baseStats",void 0);t("BaseStats",function(){function t(t){var i,n,e,a,l,s,h;this.health=void 0,this.maxHealth=void 0,this.mana=void 0,this.maxMana=void 0,this.strength=void 0,this.agility=void 0,this.intelligence=void 0,this.health=null!=(i=t.health)?i:1,this.maxHealth=null!=(n=t.maxHealth)?n:1,this.mana=null!=(e=t.mana)?e:0,this.maxMana=null!=(a=t.maxMana)?a:0,this.strength=null!=(l=t.strength)?l:0,this.agility=null!=(s=t.agility)?s:0,this.intelligence=null!=(h=t.intelligence)?h:0}return t.prototype.clone=function(){return i({},this)},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/consumable.ts",["./rollupPluginModLoBabelHelpers.js","cc","./item.ts"],(function(t){var i,n,u;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy},function(t){u=t.Item}],execute:function(){n._RF.push({},"06685Vc95hPbImMY4HBzN2r","consumable",void 0);t("Consumable",function(t){function n(i){var n;return(n=t.call(this)||this).quantity=void 0,n.item=void 0,n.item=i.item,n.quantity=i.quantity,n}i(n,t);var u=n.prototype;return u.getQuantity=function(){return this.quantity},u.addQuantity=function(t,i){var n=this.quantity+t,u=n>i?n-i:0;return this.quantity=Math.min(n,i),u},u.removeQuantity=function(t){var i=Math.min(this.quantity,t);return this.quantity-=i,i},u.isSame=function(t){return this.item.id===(null==t?void 0:t.item.id)},n}(u));n._RF.pop()}}}));

System.register("chunks:///_virtual/consumableModelFactory.ts",["./rollupPluginModLoBabelHelpers.js","cc","./consumable.ts"],(function(n){var e,t,c;return{setters:[function(n){e=n.createClass},function(n){t=n.cclegacy},function(n){c=n.Consumable}],execute:function(){t._RF.push({},"079406vMx1Mx54msZLitn19","consumableModelFactory",void 0),n("ConsumableModelFactory",function(){function n(){}var t=n.prototype;return t.create=function(n){return new c(n)},t.createBulk=function(n){return n.map((function(n){return new c(n)}))},e(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}())._instance=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/consumableUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./baseItemUI.ts"],(function(t){var e,n,i,a,r,s,o,u,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,o=t.Label,u=t.Sprite},function(t){l=t.BaseItemUI}],execute:function(){var c,f,p,h,y;r._RF.push({},"f7b7baYItRAxJCnzoQ93BBD","consumableUI",void 0);var d=s.ccclass,m=s.property;t("ConsumableUI",(c=d("ConsumableUI"),f=m(o),c((y=e((h=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))||this).data=void 0,i(e,"quantityLabel",y,a(e)),e}n(e,t);var r=e.prototype;return r.getData=function(){return this.data},r.setData=function(t){this.data=t,this.quantityLabel&&(this.quantityLabel.string=t.getQuantity().toString())},r.setSpriteFrame=function(t){var e=this.getComponent(u);e&&(e.spriteFrame=t)},r.updateQuantity=function(){this.quantityLabel&&(this.quantityLabel.string=this.data.getQuantity().toString())},r.getTooltipContent=function(){return this.data.item.name+"\n\nEffect: "+JSON.stringify(this.data.item.stats,null,2)},r.getDetailContent=function(){return"ID: "+this.data.item.id+"\n\n"+this.data.item.name+"\n\n"+this.data.item.desc+"\n\nEffect: "+JSON.stringify(this.data.item.stats,null,2)},e}(l)).prototype,"quantityLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=h))||p));r._RF.pop()}}}));

System.register("chunks:///_virtual/consumableUIFactory.ts",["./rollupPluginModLoBabelHelpers.js","cc","./dataLoader.ts","./enums.ts","./consumableUI.ts"],(function(t){var e,n,r,a,s,c,i,o;return{setters:[function(t){e=t.createClass,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){a=t.cclegacy,s=t.instantiate},function(t){c=t.DataLoader},function(t){i=t.FILENAME},function(t){o=t.ConsumableUI}],execute:function(){a._RF.push({},"0cbb9KlpZ5HIb8usuBDEi8C","consumableUIFactory",void 0),t("ConsumableUIFactory",function(){function t(){this.prefab=void 0}return t.prototype.create=function(){var t=n(r().mark((function t(e,n){var a,u,p;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.prefab){t.next=5;break}return t.next=4,c.instance.loadPrefab(i.PREFAB_CONSUMABLE_UI);case 4:this.prefab=t.sent;case 5:return t.next=7,c.instance.loadSpriteFrame(e.item.iconUrl);case 7:return a=t.sent,u=s(this.prefab),(p=u.getComponent(o))||u.addComponent(o),p.setData(e),p.setSpriteFrame(a),null==n||n.addChild(u),t.abrupt("return",u);case 17:throw t.prev=17,t.t0=t.catch(0),new Error(t.t0);case 20:case"end":return t.stop()}}),t,this,[[0,17]])})));return function(e,n){return t.apply(this,arguments)}}(),e(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,a._RF.pop()}}}));

System.register("chunks:///_virtual/damageButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameEvents.ts"],(function(t){var e,n,r,a,o,i,u,c,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,i=t._decorator,u=t.CCInteger,c=t.Component},function(t){l=t.PlayerGameEvents}],execute:function(){var s,p,g,m,v;o._RF.push({},"50b3c18V+pPSpTN+YkrS1sY","damageButton",void 0);var y=i.ccclass,f=i.property;t("DamageButton",(s=y("DamageButton"),p=f(u),s((v=e((m=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o))||this,r(e,"damageAmount",v,a(e)),e.playerEventTarget=void 0,e}n(e,t);var o=e.prototype;return o.setPlayerEventTarget=function(t){this.playerEventTarget=t},o.onClick=function(){var t;null==(t=this.playerEventTarget)||t.emit(l.PLAYER_TAKE_DAMAGE,this.damageAmount)},e}(c)).prototype,"damageAmount",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),g=m))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/dataLoader.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enums.ts"],(function(e){var r,t,n,a,s,u,i,c,o,p;return{setters:[function(e){r=e.createClass,t=e.asyncToGenerator,n=e.regeneratorRuntime},function(e){a=e.cclegacy,s=e.assetManager,u=e.Prefab,i=e.resources,c=e.SpriteFrame,o=e.JsonAsset},function(e){p=e.BUNDLENAME}],execute:function(){a._RF.push({},"165feV9a1VGWKUjIjYDRxvn","dataLoader",void 0),e("DataLoader",function(){function e(){this.prefabBundle=void 0,this.prefabCache=new Map,this.spriteFrameCache=new Map}var a=e.prototype;return a.loadJson=function(){var e=t(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){i.load("data/"+r,o,(function(r,n){r?t(r):e(n.json)}))})));case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),a.loadBundle=function(){var e=t(n().mark((function e(r){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){s.loadBundle(r,(function(r,n){r?t(r):e(n)}))})));case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),a.loadPrefab=function(){var e=t(n().mark((function e(r){var t=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.prefabCache.has(r)){e.next=2;break}return e.abrupt("return",this.prefabCache.get(r));case 2:if(e.prev=2,this.prefabBundle){e.next=7;break}return e.next=6,this.loadBundle(p.PREFABS);case 6:this.prefabBundle=e.sent;case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(2),new Error(e.t0);case 12:return e.abrupt("return",new Promise((function(e,n){t.prefabBundle.load(r,u,(function(a,s){a?n(a):(t.prefabCache.set(r,s),e(s))}))})));case 13:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(r){return e.apply(this,arguments)}}(),a.loadSpriteFrame=function(){var e=t(n().mark((function e(r){var t=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.spriteFrameCache.has(r)){e.next=2;break}return e.abrupt("return",this.spriteFrameCache.get(r));case 2:return e.abrupt("return",new Promise((function(e,n){i.load(r+"/spriteFrame",c,(function(a,s){!a&&s?(t.spriteFrameCache.set(r,s),e(s)):n(a)}))})));case 3:case"end":return e.stop()}}),e,this)})));return function(r){return e.apply(this,arguments)}}(),r(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=void 0,a._RF.pop()}}}));

System.register("chunks:///_virtual/enums.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"0b5c4C4RgVE85end1cJpqte","enums",void 0);e("BUNDLENAME",function(e){return e.PREFABS="prefabs",e}({})),e("FILENAME",function(e){return e.JSON_PLAYER_DATA="player_data",e.PREFAB_PLAYER="Player",e.PREFAB_EQUIPMENT_UI="Equipment UI",e.PREFAB_CONSUMABLE_UI="Consumable UI",e.PREFAB_INVENTORY_SLOT_UI="Inventory Slot UI",e}({})),e("ItemDetailsType",function(e){return e.CAN_EQUIP="Equip",e.CAN_UNEQUIP="Unequip",e.CAN_USE="Use",e}({}));n._RF.pop()}}}));

System.register("chunks:///_virtual/enums2.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"fb2239Rw0JEQpqtRI2v0ali","enums",void 0);t("EquipmentType",function(t){return t.HELMET="helmet",t.ARMOR="armor",t.BOOTS="boots",t}({})),t("ConsumableType",function(t){return t.HP_POTION="hp_potion",t.MP_POTION="mp_potion",t}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/equipment.ts",["./rollupPluginModLoBabelHelpers.js","cc","./item.ts"],(function(i){var t,e,n;return{setters:[function(i){t=i.inheritsLoose},function(i){e=i.cclegacy},function(i){n=i.Item}],execute:function(){e._RF.push({},"7fe72uZcaBOI4KMk+yYIbsi","equipment",void 0);i("Equipment",function(i){function e(t){var e;return(e=i.call(this)||this).instanceId=void 0,e.item=void 0,e.durability=void 0,e.maxDurability=void 0,e.instanceId=t.instanceId,e.item=t.item,e.durability=t.durability,e.maxDurability=t.maxDurability,e}return t(e,i),e.prototype.isSame=function(i){return this.instanceId===(null==i?void 0:i.instanceId)&&this.item.id===(null==i?void 0:i.item.id)},e}(n));e._RF.pop()}}}));

System.register("chunks:///_virtual/equipmentModelFactory.ts",["./rollupPluginModLoBabelHelpers.js","cc","./equipment.ts","./enums2.ts"],(function(n){var t,e,u,c;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy},function(n){u=n.Equipment},function(n){c=n.EquipmentType}],execute:function(){e._RF.push({},"b80a1ILcWtKCaDT6GzLOmM3","equipmentModelFactory",void 0),n("EquipmentModelFactory",function(){function n(){}var e=n.prototype;return e.create=function(n){return new u(n)},e.createBulk=function(n){return n.map((function(n){return new u(n)}))},e.createFromMap=function(n){return Object.values(n).filter((function(n){return Object.values(c).includes(null==n?void 0:n.item.slot)})).map((function(n){return new u(n)}))},t(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}())._instance=void 0,e._RF.pop()}}}));

System.register("chunks:///_virtual/equipmentSlotsUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameEvents.ts","./enums2.ts","./equipmentUI.ts","./equipmentUIFactory.ts"],(function(e){var t,r,n,a,i,s,o,u,c,l,p,h,f,b,y,v,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty,n=e.inheritsLoose,a=e.assertThisInitialized,i=e.asyncToGenerator,s=e.regeneratorRuntime,o=e.createForOfIteratorHelperLoose},function(e){u=e.cclegacy,c=e._decorator,l=e.Node,p=e.UIOpacity,h=e.tween,f=e.Component},function(e){b=e.PlayerGameEvents},function(e){y=e.EquipmentType},function(e){v=e.EquipmentUI},function(e){m=e.EquipmentUIFactory}],execute:function(){var E,d,g,k,x,O,w,I,P,T,U,q,L,F,S,R;u._RF.push({},"4c630s9WEFJFatpLZxw9HWZ","equipmentSlotsUI",void 0);var A=c.ccclass,M=c.property,C=(E=A("EquipmentSlotUI"),d=M(l),g=M(p),E((O=t((x=function(){r(this,"slot",O,this),r(this,"vfxOpacity",w,this),this.ui=void 0}).prototype,"slot",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=t(x.prototype,"vfxOpacity",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=x))||k);e("EquipmentSlotsUI",(I=A("EquipmentSlotsUI"),P=M(C),T=M(C),U=M(C),I((F=t((L=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return t=e.call.apply(e,[this].concat(i))||this,r(t,"helmet",F,a(t)),r(t,"armor",S,a(t)),r(t,"boots",R,a(t)),t.playerEventTarget=void 0,t}n(t,e);var u=t.prototype;return u.onDestroy=function(){this.setPlayerEventListenersOff()},u.setPlayerEventTarget=function(e){this.setPlayerEventListenersOff(),this.playerEventTarget=e,this.setPlayerEventListenersOn()},u.setPlayerEventListenersOn=function(){var e;null==(e=this.playerEventTarget)||e.on(b.PLAYER_EQUIPMENT_CHANGED,this.onPlayerEquipmentChanged,this)},u.setPlayerEventListenersOff=function(){var e;null==(e=this.playerEventTarget)||e.off(b.PLAYER_EQUIPMENT_CHANGED,this.onPlayerEquipmentChanged,this)},u.onPlayerEquipmentChanged=function(){var e=i(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.updateSlotsUI(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Failed to change equipment slots UI: ",e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),u.updateSlotsUI=function(){var e=i(s().mark((function e(t){var r,n,a,i,u,c,l,p,h,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=o(t);case 2:if((n=r()).done){e.next=51;break}i=n.value,u=i[0],c=i[1],l=void 0,p=void 0,e.t0=u,e.next=e.t0===y.HELMET?9:e.t0===y.ARMOR?12:e.t0===y.BOOTS?15:18;break;case 9:return l=this.helmet.slot,p=this.helmet.ui,e.abrupt("break",18);case 12:return l=this.armor.slot,p=this.armor.ui,e.abrupt("break",18);case 15:return l=this.boots.slot,p=this.boots.ui,e.abrupt("break",18);case 18:if(l){e.next=20;break}return e.abrupt("continue",49);case 20:if(c||p){e.next=22;break}return e.abrupt("continue",49);case 22:if(null==c||!c.isSame(null==(a=p)?void 0:a.getData())){e.next=24;break}return e.abrupt("continue",49);case 24:e.t1=u,e.next=e.t1===y.HELMET?27:e.t1===y.ARMOR?29:e.t1===y.BOOTS?31:33;break;case 27:return this.playVFX(this.helmet.vfxOpacity),e.abrupt("break",33);case 29:return this.playVFX(this.armor.vfxOpacity),e.abrupt("break",33);case 31:return this.playVFX(this.boots.vfxOpacity),e.abrupt("break",33);case 33:if(l.removeAllChildren(),h=void 0,!c){e.next=40;break}return e.next=38,m.instance.create(c,l);case 38:f=e.sent,h=f.getComponent(v);case 40:e.t2=u,e.next=e.t2===y.HELMET?43:e.t2===y.ARMOR?45:e.t2===y.BOOTS?47:49;break;case 43:return this.helmet.ui=h,e.abrupt("break",49);case 45:return this.armor.ui=h,e.abrupt("break",49);case 47:return this.boots.ui=h,e.abrupt("break",49);case 49:e.next=2;break;case 51:e.next=56;break;case 53:throw e.prev=53,e.t3=e.catch(0),new Error(e.t3);case 56:case"end":return e.stop()}}),e,this,[[0,53]])})));return function(t){return e.apply(this,arguments)}}(),u.playVFX=function(e){e&&h(e).to(.1,{opacity:255},{easing:"fade"}).to(.1,{opacity:0},{easing:"fade"}).start()},t}(f)).prototype,"helmet",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new C}}),S=t(L.prototype,"armor",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new C}}),R=t(L.prototype,"boots",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new C}}),q=L))||q));u._RF.pop()}}}));

System.register("chunks:///_virtual/equipmentSystem.ts",["cc","./enums2.ts"],(function(t){var e,s;return{setters:[function(t){e=t.cclegacy},function(t){s=t.EquipmentType}],execute:function(){e._RF.push({},"02894g8IhdOZIhkvKcmXNNf","equipmentSystem",void 0);t("EquipmentSystem",function(){function t(){var t=this;this.slots=new Map,Object.values(s).map((function(e){t.slots.set(e,null)}))}var e=t.prototype;return e.equip=function(t){var e=this.slots.get(t.item.slot);return null!=t&&t.isSame(e)?{previous:null,new:null}:(this.slots.set(t.item.slot,t),{previous:e,new:t})},e.unequip=function(t){var e=this.slots.get(t);return this.slots.set(t,null),e},e.getEquipped=function(t){return this.slots.get(t)},e.getAllEquipped=function(){return this.slots},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/equipmentUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./baseItemUI.ts"],(function(t){var n,a,e,i,s;return{setters:[function(t){n=t.inheritsLoose},function(t){a=t.cclegacy,e=t._decorator,i=t.Sprite},function(t){s=t.BaseItemUI}],execute:function(){var r;a._RF.push({},"865f5g5czRFGaDZa1YNtdvq","equipmentUI",void 0);var o=e.ccclass;t("EquipmentUI",o("EquipmentUI")(r=function(t){function a(){for(var n,a=arguments.length,e=new Array(a),i=0;i<a;i++)e[i]=arguments[i];return(n=t.call.apply(t,[this].concat(e))||this).data=void 0,n}n(a,t);var e=a.prototype;return e.getData=function(){return this.data},e.setData=function(t){this.data=t},e.setSpriteFrame=function(t){var n=this.getComponent(i);n&&(n.spriteFrame=t)},e.getTooltipContent=function(){return this.data.item.name+"\nType: "+this.data.item.slot+"\nStats: "+JSON.stringify(this.data.item.stats,null,2)},e.getDetailContent=function(){return"Instance ID: "+this.data.instanceId+"\nID: "+this.data.item.id+"\n\n"+this.data.item.name+"\nType: "+this.data.item.slot+"\nDurability: "+this.data.durability+"/"+this.data.maxDurability+"\n\n"+this.data.item.desc+"\n\nStats: "+JSON.stringify(this.data.item.stats,null,2)},a}(s))||r);a._RF.pop()}}}));

System.register("chunks:///_virtual/equipmentUIFactory.ts",["./rollupPluginModLoBabelHelpers.js","cc","./dataLoader.ts","./enums.ts","./equipmentUI.ts"],(function(t){var e,n,r,a,i,c,s,o;return{setters:[function(t){e=t.createClass,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){a=t.cclegacy,i=t.instantiate},function(t){c=t.DataLoader},function(t){s=t.FILENAME},function(t){o=t.EquipmentUI}],execute:function(){a._RF.push({},"cd5b71h879FOJcNfAGAM0ZN","equipmentUIFactory",void 0),t("EquipmentUIFactory",function(){function t(){this.prefab=void 0}return t.prototype.create=function(){var t=n(r().mark((function t(e,n){var a,u,p;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.prefab){t.next=5;break}return t.next=4,c.instance.loadPrefab(s.PREFAB_EQUIPMENT_UI);case 4:this.prefab=t.sent;case 5:return t.next=7,c.instance.loadSpriteFrame(e.item.iconUrl);case 7:return a=t.sent,u=i(this.prefab),(p=u.getComponent(o))||u.addComponent(o),p.setData(e),p.setSpriteFrame(a),null==n||n.addChild(u),t.abrupt("return",u);case 17:throw t.prev=17,t.t0=t.catch(0),new Error(t.t0);case 20:case"end":return t.stop()}}),t,this,[[0,17]])})));return function(e,n){return t.apply(this,arguments)}}(),e(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,a._RF.pop()}}}));

System.register("chunks:///_virtual/gameEvents.ts",["cc"],(function(E){var _;return{setters:[function(E){_=E.cclegacy}],execute:function(){_._RF.push({},"e44804LC3tA7ZZdvfgm7SSJ","gameEvents",void 0);E("GlobalGameEvents",function(E){return E.PLAYER_READY="PLAYER_READY",E.ITEM_HOVER_ENTER="ITEM_HOVER_ENTER",E.ITEM_HOVER_LEAVE="ITEM_HOVER_LEAVE",E.ITEM_CLICK="ITEM_CLICK",E}({})),E("PlayerGameEvents",function(E){return E.PLAYER_STATS_CHANGED="PLAYER_STATS_CHANGED",E.PLAYER_TAKE_DAMAGE="PLAYER_TAKE_DAMAGE",E.PLAYER_USE_MANA="PLAYER_USE_MANA",E.PLAYER_USING_CONSUMABLE="PLAYER_USING_CONSUMABLE",E.PLAYER_CONSUMABLE_USED="PLAYER_CONSUMABLE_USED",E.PLAYER_EQUIPMENT_CHANGED="PLAYER_EQUIPMENT_CHANGED",E.PLAYER_EQUIPPING_EQUIPMENT="PLAYER_EQUIPPING_EQUIPMENT",E.PLAYER_UNEQUIPPING_EQUIPMENT="PLAYER_UNEQUIPPING_EQUIPMENT",E}({})),E("InventoryGameEvents",function(E){return E.INVENTORY_CONSUMABLE_EMPTIED="INVENTORY_CONSUMABLE_EMPTIED",E}({}));_._RF.pop()}}}));

System.register("chunks:///_virtual/gameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./dataLoader.ts","./playerFactory.ts","./enums.ts","./gameEvents.ts"],(function(e){var t,a,r,n,o,i,s,c,l,u,p,f,y,g,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){s=e.cclegacy,c=e._decorator,l=e.Node,u=e.Component,p=e.director},function(e){f=e.DataLoader},function(e){y=e.PlayerFactory},function(e){g=e.FILENAME},function(e){m=e.GlobalGameEvents}],execute:function(){var d,h,v,R,w;s._RF.push({},"3aa4flqnwBBPqLwjBG2fRNZ","gameManager",void 0);var b=c.ccclass,L=c.property;e("GameManager",(d=b("GameManager"),h=L(l),d((w=t((R=function(e){function t(){for(var t,a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,r(t,"gameplayRoot",w,n(t)),t}a(t,e);var s=t.prototype;return s.start=function(){this.spawnPlayer()},s.spawnPlayer=function(){var e=o(i().mark((function e(){var t,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.gameplayRoot){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,f.instance.loadJson(g.JSON_PLAYER_DATA);case 5:return t=e.sent,e.next=8,y.instance.create(t,this.gameplayRoot);case 8:a=e.sent,p.emit(m.PLAYER_READY,a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.error("Failed to load spawn player: ",e.t0);case 15:case"end":return e.stop()}}),e,this,[[2,12]])})));return function(){return e.apply(this,arguments)}}(),t}(u)).prototype,"gameplayRoot",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),v=R))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/interfaces.ts",["cc"],(function(){var c;return{setters:[function(e){c=e.cclegacy}],execute:function(){c._RF.push({},"cc98b2p7xBEF4KG/XcB3A7u","interfaces",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/interfaces2.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"d6d88CkZ3NM0Zhq6bII59QW","interfaces",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/inventorySlotsUIFactory.ts",["./rollupPluginModLoBabelHelpers.js","cc","./dataLoader.ts","./enums.ts","./inventorySlotUI.ts"],(function(t){var e,n,r,a,c,s,o,i;return{setters:[function(t){e=t.createClass,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){a=t.cclegacy,c=t.instantiate},function(t){s=t.DataLoader},function(t){o=t.FILENAME},function(t){i=t.InventorySlotUI}],execute:function(){a._RF.push({},"a4c6etAeYxEroTidfXTjZt8","inventorySlotsUIFactory",void 0),t("InventorySlotsUIFactory",function(){function t(){this.prefab=void 0}var a=t.prototype;return a.create=function(){var t=n(r().mark((function t(e){var n,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.prefab){t.next=5;break}return t.next=4,s.instance.loadPrefab(o.PREFAB_INVENTORY_SLOT_UI);case 4:this.prefab=t.sent;case 5:return n=c(this.prefab),a=n.getComponent(i),e.addChild(n),t.abrupt("return",a);case 11:throw t.prev=11,t.t0=t.catch(0),new Error(t.t0);case 14:case"end":return t.stop()}}),t,this,[[0,11]])})));return function(e){return t.apply(this,arguments)}}(),a.createBulk=function(){var t=n(r().mark((function t(e,n){var a,c,s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,a=[],c=0;case 3:if(!(c<e)){t.next=11;break}return t.next=6,this.create(n);case 6:s=t.sent,a.push(s);case 8:c++,t.next=3;break;case 11:return t.abrupt("return",a);case 14:throw t.prev=14,t.t0=t.catch(0),new Error(t.t0);case 17:case"end":return t.stop()}}),t,this,[[0,14]])})));return function(e,n){return t.apply(this,arguments)}}(),e(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,a._RF.pop()}}}));

System.register("chunks:///_virtual/inventorySlotUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./baseItemUI.ts"],(function(t){var e,n,o,r,i,l,a,c,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){i=t.cclegacy,l=t._decorator,a=t.Node,c=t.Component},function(t){s=t.BaseItemUI}],execute:function(){var u,v,p,y,h,I,f;i._RF.push({},"f6805qVDt5OCKa5Q7yqeVKm","inventorySlotUI",void 0);var d=l.ccclass,m=l.property;t("InventorySlotUI",(u=d("InventorySlotUI"),v=m(a),p=m(a),u((I=e((h=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return e=t.call.apply(t,[this].concat(i))||this,o(e,"contentRoot",I,r(e)),o(e,"overlay",f,r(e)),e.contentItem=void 0,e}n(e,t);var i=e.prototype;return i.hasContent=function(){return!!this.contentItem},i.getContentItemUI=function(){return this.contentItem},i.getContentData=function(){var t;return null==(t=this.contentItem)?void 0:t.getData()},i.setContent=function(t){var e,n;(null==(e=this.contentRoot)||e.destroyAllChildren(),t)&&(this.contentItem=null==t?void 0:t.getComponent(s),null==(n=this.contentRoot)||n.addChild(t))},i.setOverlay=function(t){this.overlay&&(this.overlay.active=t)},e}(c)).prototype,"contentRoot",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=e(h.prototype,"overlay",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=h))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/inventorySystem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./consumableModelFactory.ts","./equipmentModelFactory.ts","./consumable.ts"],(function(t){var e,n,i,s,o;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy},function(t){i=t.ConsumableModelFactory},function(t){s=t.EquipmentModelFactory},function(t){o=t.Consumable}],execute:function(){n._RF.push({},"995cbSZXt1JmZ+esNXWcAOh","inventorySystem",void 0);t("InventorySystem",function(){function t(t){this.items=void 0,this.maxSlots=void 0,this.MAX_STACK_SIZE=99,this.maxSlots=t.maxSlots;var e=t.items.filter((function(t){return"instanceId"in t})),n=s.instance.createBulk(e),o=t.items.filter((function(t){return"quantity"in t})),r=i.instance.createBulk(o);this.items=[].concat(n,r)}var n=t.prototype;return n.getItems=function(){return this.items},n.getConsumableItem=function(t){return this.items.filter((function(e){return e instanceof o&&e.item.id===t}))},n.getMaxSlots=function(){return this.maxSlots},n.getFilledSlotsAmount=function(){return this.items.length},n.getAvailableSlots=function(){return this.maxSlots-this.items.length},n.hasSpace=function(t){return void 0===t&&(t=1),this.items.length+t<=this.maxSlots},n.addItem=function(t){return t instanceof o?this.addConsumableItem(t):!!this.hasSpace()&&(this.items.push(t),!0)},n.removeItem=function(t){var e=this.items.findIndex((function(e){return e===t}));return-1===e?null:this.items.splice(e,1)[0]},n.reduceConsumableQuantity=function(t){var e=this.getConsumableItem(t.item.id);0!==e.length&&(e.sort((function(t,e){return t.getQuantity()<e.getQuantity()?-1:1})),e[0].removeQuantity(1),e[0].getQuantity()<=0&&this.removeItem(e[0]))},n.addConsumableItem=function(t){for(var n,i=t.getQuantity(),s=!1,r=this.getConsumableItem(t.item.id),u=e(r);!(n=u()).done;){var a=n.value;if(i<=0)break;var m=this.MAX_STACK_SIZE-a.getQuantity();if(m>0){var c=Math.min(i,m);a.addQuantity(c,this.MAX_STACK_SIZE),i-=c,s=!0}}if(i<=0)return s;for(var l=this.getAvailableSlots();i>0&&l>0;){var h=Math.min(i,this.MAX_STACK_SIZE);this.items.push(new o({item:t.item,quantity:h})),i-=h,l--,s=!0}return s},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/inventoryUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameEvents.ts","./equipment.ts","./inventorySlotsUIFactory.ts","./equipmentUIFactory.ts","./consumable.ts","./consumableUIFactory.ts"],(function(t){var e,n,r,i,s,a,o,l,c,u,v,y,f,h,p,m,E,g,I,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized,s=t.asyncToGenerator,a=t.regeneratorRuntime},function(t){o=t.cclegacy,l=t._decorator,c=t.Node,u=t.Label,v=t.EventTarget,y=t.Color,f=t.Component},function(t){h=t.PlayerGameEvents,p=t.InventoryGameEvents},function(t){m=t.Equipment},function(t){E=t.InventorySlotsUIFactory},function(t){g=t.EquipmentUIFactory},function(t){I=t.Consumable},function(t){b=t.ConsumableUIFactory}],execute:function(){var S,d,U,L,x,C,P;o._RF.push({},"a00fbEZ3cFAMp8zxMiMAswW","inventoryUI",void 0);var T=l.ccclass,w=l.property;t("InventoryUI",(S=T("InventoryUI"),d=w(c),U=w(u),S((C=e((x=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,r(e,"grid",C,i(e)),r(e,"limitLabel",P,i(e)),e.inventorySystem=void 0,e.playerEventTarget=void 0,e.eventTarget=new v,e.slots=[],e}n(e,t);var o=e.prototype;return o.onDestroy=function(){this.setPlayerEventListenersOff()},o.init=function(){var t=s(a().mark((function t(e,n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.inventorySystem=e,t.next=4,this.initEmptySlots();case 4:return t.next=6,this.initSlotItems(n);case 6:this.setLimitLabel(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error("Failed to init inventory UI: ",t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}(),o.getEventTarget=function(){return this.eventTarget},o.setPlayerEventTarget=function(t){this.setPlayerEventListenersOff(),this.playerEventTarget=t,this.setPlayerEventListenersOn()},o.setPlayerEventListenersOn=function(){var t,e;null==(t=this.playerEventTarget)||t.on(h.PLAYER_EQUIPMENT_CHANGED,this.onPlayerEquipmentChanged,this),null==(e=this.playerEventTarget)||e.on(h.PLAYER_CONSUMABLE_USED,this.onPlayerConsumableUsed,this)},o.setPlayerEventListenersOff=function(){var t,e;null==(t=this.playerEventTarget)||t.off(h.PLAYER_EQUIPMENT_CHANGED,this.onPlayerEquipmentChanged,this),null==(e=this.playerEventTarget)||e.on(h.PLAYER_CONSUMABLE_USED,this.onPlayerConsumableUsed,this)},o.getMaxSlots=function(){return this.inventorySystem.getMaxSlots()},o.getEquipmentInventorySlotUI=function(t){return this.slots.find((function(e){var n=e.getContentData();return n instanceof m&&n.isSame(t)}))},o.getConsumableInventorySlotUIs=function(t){return this.slots.filter((function(e){var n=e.getContentData();return n instanceof I&&n.item.id===t.item.id}))},o.initEmptySlots=function(){var t=s(a().mark((function t(){var e,n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=this.inventorySystem.getMaxSlots(),n=this.inventorySystem.getFilledSlotsAmount(),t.next=5,E.instance.createBulk(Math.max(e,n),this.grid);case 5:this.slots=t.sent,t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(0),new Error(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),o.initSlotItems=function(){var t=s(a().mark((function t(e){var n,r,i,s,o=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,n=this.inventorySystem.getItems(),r=Array.from(e.values()),i=a().mark((function t(){var e,i,l,c;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((e=n[s])instanceof m)){t.next=10;break}return t.next=4,g.instance.create(e);case 4:i=t.sent,o.slots[s].setContent(i),l=r.some((function(t){return e.isSame(t)})),o.slots[s].setOverlay(l),t.next=15;break;case 10:if(!(e instanceof I)){t.next=15;break}return t.next=13,b.instance.create(e);case 13:c=t.sent,o.slots[s].setContent(c);case 15:case"end":return t.stop()}}),t)})),s=0;case 5:if(!(s<n.length)){t.next=10;break}return t.delegateYield(i(),"t0",7);case 7:s++,t.next=5;break;case 10:t.next=15;break;case 12:throw t.prev=12,t.t1=t.catch(0),new Error(t.t1);case 15:case"end":return t.stop()}}),t,this,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),o.onPlayerEquipmentChanged=function(t,e,n){e&&this.getEquipmentInventorySlotUI(e).setOverlay(!1);n&&this.getEquipmentInventorySlotUI(n).setOverlay(!0)},o.onPlayerConsumableUsed=function(t){var e=this,n=this.getConsumableInventorySlotUIs(t);n.forEach((function(t){var r=t.getContentItemUI();r.updateQuantity(),0===r.getData().getQuantity()&&(t.setContent(null),e.setLimitLabel(),1===n.length&&e.eventTarget.emit(p.INVENTORY_CONSUMABLE_EMPTIED))}))},o.setLimitLabel=function(){if(this.limitLabel){var t=this.inventorySystem.getFilledSlotsAmount(),e=this.getMaxSlots();this.limitLabel.string=t+"/"+e,this.limitLabel.color=t>e?y.RED:y.WHITE}},e}(f)).prototype,"grid",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=e(x.prototype,"limitLabel",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=x))||L));o._RF.pop()}}}));

System.register("chunks:///_virtual/item.ts",["cc"],(function(t){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"cdc7aLfshlJWL5nM+Uglp4N","item",void 0);t("Item",(function(){}));c._RF.pop()}}}));

System.register("chunks:///_virtual/itemDetailsUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enums.ts","./gameEvents.ts"],(function(t){var e,i,n,s,o,r,a,l,h,u,v,c,E;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,a=t.Node,l=t.Button,h=t.Label,u=t.Component},function(t){v=t.ItemDetailsType},function(t){c=t.PlayerGameEvents,E=t.InventoryGameEvents}],execute:function(){var y,p,f,I,m,P,T,g,U,L,N,C,_;o._RF.push({},"17b4e8LdU1Doqf+MzHe0Zf6","itemDetailsUI",void 0);var b=r.ccclass,d=r.property;t("ItemDetailsUI",(y=b("ItemDetailsUI"),p=d(a),f=d(l),I=d(h),m=d(l),P=d(h),y((U=e((g=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o))||this,n(e,"view",U,s(e)),n(e,"useButton",L,s(e)),n(e,"useButtonLabel",N,s(e)),n(e,"closeButton",C,s(e)),n(e,"content",_,s(e)),e.itemDetailsType=v.CAN_EQUIP,e.playerEventTarget=void 0,e.inventoryEventTarget=void 0,e.item=void 0,e}i(e,t);var o=e.prototype;return o.onLoad=function(){var t,e;this.view&&this.hide(),null==(t=this.closeButton)||t.node.on(l.EventType.CLICK,this.hide,this),null==(e=this.useButton)||e.node.on(l.EventType.CLICK,this.onClickUse,this)},o.onDestroy=function(){var t,e;null==(t=this.closeButton)||t.node.off(l.EventType.CLICK,this.hide,this),null==(e=this.useButton)||e.node.off(l.EventType.CLICK,this.onClickUse,this)},o.setInventoryEventTarget=function(t){this.setInventoryEventListenersOff(),this.inventoryEventTarget=t,this.setInventoryEventListenersOn()},o.setPlayerEventTarget=function(t){this.setPlayerEventListenersOff(),this.playerEventTarget=t,this.setPlayerEventListenersOn()},o.setPlayerEventListenersOn=function(){var t;null==(t=this.playerEventTarget)||t.on(c.PLAYER_EQUIPMENT_CHANGED,this.onPlayerEquipmentChanged,this)},o.setPlayerEventListenersOff=function(){var t;null==(t=this.playerEventTarget)||t.off(c.PLAYER_EQUIPMENT_CHANGED,this.onPlayerEquipmentChanged,this)},o.setInventoryEventListenersOn=function(){var t;null==(t=this.inventoryEventTarget)||t.on(E.INVENTORY_CONSUMABLE_EMPTIED,this.hide,this)},o.setInventoryEventListenersOff=function(){var t;null==(t=this.inventoryEventTarget)||t.on(E.INVENTORY_CONSUMABLE_EMPTIED,this.hide,this)},o.show=function(t,e,i){void 0===i&&(i=""),this.view&&(this.view.active=!0,this.itemDetailsType=t,this.item=e,this.useButtonLabel&&(this.useButtonLabel.string=t),this.content&&(this.content.string=i))},o.hide=function(){this.view.active=!1},o.onClickUse=function(){switch(this.itemDetailsType){case v.CAN_EQUIP:this.playerEventTarget.emit(c.PLAYER_EQUIPPING_EQUIPMENT,this.item);break;case v.CAN_UNEQUIP:this.playerEventTarget.emit(c.PLAYER_UNEQUIPPING_EQUIPMENT,this.item.item.slot);break;case v.CAN_USE:this.playerEventTarget.emit(c.PLAYER_USING_CONSUMABLE,this.item)}},o.onPlayerEquipmentChanged=function(){var t;if(null!=(t=this.view)&&t.active&&this.content&&this.item)switch(this.itemDetailsType){case v.CAN_EQUIP:this.show(v.CAN_UNEQUIP,this.item,this.content.string);break;case v.CAN_UNEQUIP:this.show(v.CAN_EQUIP,this.item,this.content.string)}},e}(u)).prototype,"view",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(g.prototype,"useButton",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=e(g.prototype,"useButtonLabel",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(g.prototype,"closeButton",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_=e(g.prototype,"content",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=g))||T));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./player.ts","./baseItemUI.ts","./consumableUI.ts","./damageButton.ts","./equipmentSlotsUI.ts","./equipmentUI.ts","./inventorySlotUI.ts","./inventoryUI.ts","./itemDetailsUI.ts","./playerStatsHUD.ts","./spellButton.ts","./tooltipUI.ts","./playerController.ts","./consumableModelFactory.ts","./consumableUIFactory.ts","./equipmentModelFactory.ts","./equipmentUIFactory.ts","./inventorySlotsUIFactory.ts","./playerFactory.ts","./dataLoader.ts","./gameManager.ts","./uiManager.ts","./baseStats.ts","./consumable.ts","./equipment.ts","./equipmentSystem.ts","./inventorySystem.ts","./item.ts","./playerStats.ts","./enums2.ts","./interfaces2.ts","./enums.ts","./gameEvents.ts","./interfaces.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playerController.ts","./enums2.ts","./gameEvents.ts"],(function(t){var e,n,i,s,o,r,a,h,u,l,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,s=t.Sprite,o=t.Color,r=t.tween,a=t.EventTarget,h=t.Component},function(t){u=t.PlayerController},function(t){l=t.ConsumableType},function(t){c=t.PlayerGameEvents}],execute:function(){var E;n._RF.push({},"58c01iuj21A+IvoxOfcPxC0","player",void 0);var f=i.ccclass;t("Player",f("Player")(E=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this).sprite=void 0,e.controller=void 0,e.eventTarget=new a,e}e(n,t);var i=n.prototype;return i.onLoad=function(){this.sprite=this.getComponent(s),this.eventTarget.on(c.PLAYER_TAKE_DAMAGE,this.takeDamage,this),this.eventTarget.on(c.PLAYER_USE_MANA,this.useMana,this),this.eventTarget.on(c.PLAYER_EQUIPPING_EQUIPMENT,this.equip,this),this.eventTarget.on(c.PLAYER_UNEQUIPPING_EQUIPMENT,this.unequip,this),this.eventTarget.on(c.PLAYER_USING_CONSUMABLE,this.useConsumable,this)},i.onDestroy=function(){this.eventTarget.off(c.PLAYER_TAKE_DAMAGE,this.takeDamage,this),this.eventTarget.off(c.PLAYER_USE_MANA,this.useMana,this),this.eventTarget.off(c.PLAYER_EQUIPPING_EQUIPMENT,this.equip,this),this.eventTarget.off(c.PLAYER_UNEQUIPPING_EQUIPMENT,this.unequip,this),this.eventTarget.off(c.PLAYER_USING_CONSUMABLE,this.useConsumable,this)},i.init=function(t){this.controller=new u(t)},i.start=function(){this.notifyStatsChanged(),this.notifyEquipmentChanged()},i.getEventTarget=function(){return this.eventTarget},i.getStats=function(){return this.controller.getStats()},i.getEquippedEquipments=function(){return this.controller.getAllEquipped()},i.getInventorySystem=function(){return this.controller.getInventorySystem()},i.takeDamage=function(t){var e=this.controller.takeDamage(t);return e&&(this.notifyStatsChanged(),this.playVFX(o.RED)),e},i.useMana=function(t){var e=this.controller.useMana(t);return e&&(this.notifyStatsChanged(),this.playVFX(o.BLUE)),e},i.equip=function(t){var e=this.controller.equip(t);e.new&&(this.notifyEquipmentChanged(e.previous,e.new),this.notifyStatsChanged())},i.unequip=function(t){var e=this.controller.unequip(t);e&&(this.notifyEquipmentChanged(e),this.notifyStatsChanged())},i.useConsumable=function(t){this.controller.useConsumable(t)&&(this.notifyStatsChanged(),this.notifyConsumableUsed(t),t.item.type===l.HP_POTION&&this.playVFX(o.GREEN),t.item.type===l.MP_POTION&&this.playVFX(o.CYAN))},i.notifyStatsChanged=function(){this.eventTarget.emit(c.PLAYER_STATS_CHANGED,this.controller.getStats())},i.notifyEquipmentChanged=function(){for(var t,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];(t=this.eventTarget).emit.apply(t,[c.PLAYER_EQUIPMENT_CHANGED,this.controller.getAllEquipped()].concat(n))},i.notifyConsumableUsed=function(t){this.eventTarget.emit(c.PLAYER_CONSUMABLE_USED,t)},i.playVFX=function(t){this.sprite&&r(this.sprite).to(.1,{color:t},{easing:"fade"}).to(.1,{color:o.WHITE},{easing:"fade"}).start()},n}(h))||E);n._RF.pop()}}}));

System.register("chunks:///_virtual/playerController.ts",["cc","./equipmentModelFactory.ts","./equipmentSystem.ts","./inventorySystem.ts","./playerStats.ts","./enums2.ts"],(function(t){var e,n,s,i,r,u;return{setters:[function(t){e=t.cclegacy},function(t){n=t.EquipmentModelFactory},function(t){s=t.EquipmentSystem},function(t){i=t.InventorySystem},function(t){r=t.PlayerStats},function(t){u=t.ConsumableType}],execute:function(){e._RF.push({},"bbe836eSpdHZJihyPNv96k3","playerController",void 0);t("PlayerController",function(){function t(t){var e=this;this.stats=void 0,this.equipmentSystem=void 0,this.inventorySystem=void 0,this.stats=new r(t.stats),this.equipmentSystem=new s,this.inventorySystem=new i(t.inventory),n.instance.createFromMap(t.equipments).forEach((function(t){return e.equip(t)}))}var e=t.prototype;return e.getStats=function(){return this.stats.getStats()},e.getEquipped=function(t){return this.equipmentSystem.getEquipped(t)},e.getAllEquipped=function(){return this.equipmentSystem.getAllEquipped()},e.getInventorySystem=function(){return this.inventorySystem},e.getInventoryItems=function(){return this.inventorySystem.getItems()},e.getInventoryMaxSlotsAmount=function(){return this.inventorySystem.getMaxSlots()},e.takeDamage=function(t){return this.stats.takeDamage(t)},e.heal=function(t){return this.stats.heal(t)},e.useMana=function(t){return this.stats.useMana(t)},e.restoreMana=function(t){return this.stats.restoreMana(t)},e.useConsumable=function(t){var e=!1;return t.item.type===u.HP_POTION&&t.item.stats.health?e=this.heal(t.item.stats.health):t.item.type===u.MP_POTION&&t.item.stats.mana&&(e=this.restoreMana(t.item.stats.mana)),e&&this.inventorySystem.reduceConsumableQuantity(t),e},e.equip=function(t){var e=this.equipmentSystem.equip(t);return e.previous&&this.stats.removeModifier(e.previous.item.stats),e.new&&this.stats.addModifier(e.new.item.stats),e},e.unequip=function(t){var e=this.equipmentSystem.unequip(t);return e&&this.stats.removeModifier(e.item.stats),e},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/playerFactory.ts",["./rollupPluginModLoBabelHelpers.js","cc","./player.ts","./dataLoader.ts","./enums.ts"],(function(t){var e,n,r,a,i,c,s,o;return{setters:[function(t){e=t.createClass,n=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){a=t.cclegacy,i=t.instantiate},function(t){c=t.Player},function(t){s=t.DataLoader},function(t){o=t.FILENAME}],execute:function(){a._RF.push({},"bf0e3hehMxDTr8ks2LFiaMl","playerFactory",void 0),t("PlayerFactory",function(){function t(){this.prefab=void 0}return t.prototype.create=function(){var t=n(r().mark((function t(e,n){var a,u;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this.prefab){t.next=5;break}return t.next=4,s.instance.loadPrefab(o.PREFAB_PLAYER);case 4:this.prefab=t.sent;case 5:return a=i(this.prefab),(u=a.getComponent(c))||a.addComponent(c),null==u||u.init(e),n.addChild(a),t.abrupt("return",a);case 13:throw t.prev=13,t.t0=t.catch(0),new Error(t.t0);case 16:case"end":return t.stop()}}),t,this,[[0,13]])})));return function(e,n){return t.apply(this,arguments)}}(),e(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,a._RF.pop()}}}));

System.register("chunks:///_virtual/playerStats.ts",["cc","./baseStats.ts"],(function(t){var a,s;return{setters:[function(t){a=t.cclegacy},function(t){s=t.BaseStats}],execute:function(){a._RF.push({},"f98baJmhQxJGJPb9/3fGMP3","playerStats",void 0);t("PlayerStats",function(){function t(t){this.baseStats=void 0,this.modifiers=[],this.baseStats=new s(t)}var a=t.prototype;return a.addModifier=function(t){this.modifiers.push(t)},a.removeModifier=function(t){this.modifiers=this.modifiers.filter((function(a){return a!==t}))},a.getStats=function(){return this.modifiers.reduce((function(t,a){return Object.keys(a).forEach((function(s){"health"===s?t[s]=Math.min(t[s]+a[s],t.maxHealth):"mana"===s?t[s]=Math.min(t[s]+a[s],t.maxMana):s in t&&(t[s]+=a[s])})),t}),this.baseStats.clone())},a.isFullHealth=function(){return this.baseStats.health>=this.baseStats.maxHealth},a.takeDamage=function(t){return!(t<=0||this.baseStats.health<=0)&&(this.baseStats.health=Math.max(this.baseStats.health-t,0),!0)},a.heal=function(t){return!(t<=0||this.isFullHealth())&&(this.baseStats.health=Math.min(this.baseStats.health+t,this.baseStats.maxHealth),!0)},a.isFullMana=function(){return this.baseStats.mana>=this.baseStats.maxMana},a.useMana=function(t){return!(t<=0||this.baseStats.mana<=0)&&(this.baseStats.mana=Math.max(this.baseStats.mana-t,0),!0)},a.restoreMana=function(t){return!(t<=0||this.isFullMana())&&(this.baseStats.mana=Math.min(this.baseStats.mana+t,this.baseStats.maxMana),!0)},t}());a._RF.pop()}}}));

System.register("chunks:///_virtual/playerStatsHUD.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameEvents.ts"],(function(e){var t,a,i,n,l,r,s,o,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){l=e.cclegacy,r=e._decorator,s=e.Label,o=e.Component},function(e){h=e.PlayerGameEvents}],execute:function(){var u,c,b,p,g,y,L,f,v,E,m,D,H;l._RF.push({},"93753pYohZH+ZZWN6rsxE5H","playerStatsHUD",void 0);var P=r.ccclass,T=r.property;e("PlayerStatsHUD",(u=P("PlayerStatsHUD"),c=T(s),b=T(s),p=T(s),g=T(s),y=T(s),u((v=t((f=function(e){function t(){for(var t,a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return t=e.call.apply(e,[this].concat(l))||this,i(t,"healthLabel",v,n(t)),i(t,"manaLabel",E,n(t)),i(t,"strengthLabel",m,n(t)),i(t,"agilityLabel",D,n(t)),i(t,"intelligenceLabel",H,n(t)),t.playerEventTarget=void 0,t}a(t,e);var l=t.prototype;return l.onDestroy=function(){this.setPlayerEventListenersOff()},l.setPlayerEventTarget=function(e){this.setPlayerEventListenersOff(),this.playerEventTarget=e,this.setPlayerEventListenersOn()},l.setPlayerEventListenersOn=function(){var e;null==(e=this.playerEventTarget)||e.on(h.PLAYER_STATS_CHANGED,this.updateHUD,this)},l.setPlayerEventListenersOff=function(){var e;null==(e=this.playerEventTarget)||e.off(h.PLAYER_STATS_CHANGED,this.updateHUD,this)},l.updateHUD=function(e){this.healthLabel&&(this.healthLabel.string=e.health+" / "+e.maxHealth),this.manaLabel&&(this.manaLabel.string=e.mana+" / "+e.maxMana),this.strengthLabel&&(this.strengthLabel.string=""+e.strength),this.agilityLabel&&(this.agilityLabel.string=""+e.agility),this.intelligenceLabel&&(this.intelligenceLabel.string=""+e.intelligence)},t}(o)).prototype,"healthLabel",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=t(f.prototype,"manaLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=t(f.prototype,"strengthLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=t(f.prototype,"agilityLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H=t(f.prototype,"intelligenceLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=f))||L));l._RF.pop()}}}));

System.register("chunks:///_virtual/spellButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameEvents.ts"],(function(t){var e,n,r,a,o,i,l,u,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,i=t._decorator,l=t.CCInteger,u=t.Component},function(t){c=t.PlayerGameEvents}],execute:function(){var s,p,v,y,f;o._RF.push({},"26e9cmEYJlMlKhWtbCN0ZvL","spellButton",void 0);var m=i.ccclass,g=i.property;t("SpellButton",(s=m("SpellButton"),p=g(l),s((f=e((y=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o))||this,r(e,"manaAmount",f,a(e)),e.playerEventTarget=void 0,e}n(e,t);var o=e.prototype;return o.setPlayerEventTarget=function(t){this.playerEventTarget=t},o.onClick=function(){var t;null==(t=this.playerEventTarget)||t.emit(c.PLAYER_USE_MANA,this.manaAmount)},e}(u)).prototype,"manaAmount",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=y))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/tooltipUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameEvents.ts"],(function(t){var i,e,n,o,a,s,r,h,c,l,d,p,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,r=t.Node,h=t.Label,c=t.director,l=t.UITransform,d=t.view,p=t.Component},function(t){u=t.GlobalGameEvents}],execute:function(){var f,v,g,E,w,b,m;a._RF.push({},"c85a2hIAtdEYZMP4FkSw4fh","tooltipUI",void 0);var y=s.ccclass,_=s.property;t("TooltipUI",(f=y("TooltipUI"),v=_(r),g=_(h),f((b=i((w=function(t){function i(){for(var i,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return i=t.call.apply(t,[this].concat(a))||this,n(i,"view",b,o(i)),n(i,"contentLabel",m,o(i)),i.padding=10,i}e(i,t);var a=i.prototype;return a.onLoad=function(){this.view.active=!1,c.on(u.ITEM_HOVER_ENTER,this.show,this),c.on(u.ITEM_HOVER_LEAVE,this.hide,this)},a.onDestroy=function(){c.off(u.ITEM_HOVER_ENTER,this.show,this),c.off(u.ITEM_HOVER_LEAVE,this.hide,this)},a.show=function(t,i){void 0===i&&(i=""),this.contentLabel&&(this.contentLabel.string=i),this.view.active=!0,this.adjustPosition(t)},a.hide=function(){this.view.active=!1},a.adjustPosition=function(t){var i=this.view.getComponent(l);if(i){var e,n,o=t.x,a=t.y,s=d.getVisibleSize(),r=i.contentSize,h=s.width/2,c=s.height/2;e=o<h?o+this.padding:o-r.width/2-this.padding,n=a>c?a-r.height/2-this.padding:a+this.padding,e=Math.max(0,Math.min(e,s.width-r.width/2)),n=Math.max(0,Math.min(n,s.height-r.height/2)),this.node.setWorldPosition(e,n,0)}},i}(p)).prototype,"view",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=i(w.prototype,"contentLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),E=w))||E));a._RF.pop()}}}));

System.register("chunks:///_virtual/uiManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playerStatsHUD.ts","./player.ts","./gameEvents.ts","./spellButton.ts","./damageButton.ts","./equipmentSlotsUI.ts","./inventoryUI.ts","./itemDetailsUI.ts","./enums.ts","./equipment.ts"],(function(t){var e,n,i,r,a,l,o,s,u,p,y,c,m,f,h,I,g,v,U,E;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,a=t.asyncToGenerator,l=t.regeneratorRuntime},function(t){o=t.cclegacy,s=t._decorator,u=t.director,p=t.Component},function(t){y=t.PlayerStatsHUD},function(t){c=t.Player},function(t){m=t.GlobalGameEvents},function(t){f=t.SpellButton},function(t){h=t.DamageButton},function(t){I=t.EquipmentSlotsUI},function(t){g=t.InventoryUI},function(t){v=t.ItemDetailsUI},function(t){U=t.ItemDetailsType},function(t){E=t.Equipment}],execute:function(){var D,b,d,P,S,T,w,q,B,_,R,A,C,z,L;o._RF.push({},"b59eaDQ4JFFLo+EBPUFqIO2","uiManager",void 0);var M=s.ccclass,H=s.property;t("UIManager",(D=M("UIManager"),b=H(y),d=H(I),P=H(g),S=H(v),T=H(h),w=H(f),D((_=e((B=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a))||this,i(e,"playerStatsHUD",_,r(e)),i(e,"equipmentSlotsUI",R,r(e)),i(e,"inventoryUI",A,r(e)),i(e,"itemDetailsUI",C,r(e)),i(e,"damageButton",z,r(e)),i(e,"spellButton",L,r(e)),e.player=void 0,e}n(e,t);var o=e.prototype;return o.onLoad=function(){u.on(m.PLAYER_READY,this.onPlayerReady,this),u.on(m.ITEM_CLICK,this.onShowItemDetails,this)},o.onDestroy=function(){u.off(m.PLAYER_READY,this.onPlayerReady,this),u.off(m.ITEM_CLICK,this.onShowItemDetails,this)},o.start=function(){var t;this.inventoryUI&&(null==(t=this.itemDetailsUI)||t.setInventoryEventTarget(this.inventoryUI.getEventTarget()))},o.onPlayerReady=function(){var t=a(l().mark((function t(e){var n,i,r,a,o,s,u,p,y;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.player=e.getComponent(c),null==(n=this.inventoryUI)||n.init(this.player.getInventorySystem(),this.player.getEquippedEquipments()),(r=null==(i=this.player)?void 0:i.getEventTarget())&&(null==(a=this.playerStatsHUD)||a.setPlayerEventTarget(r),null==(o=this.equipmentSlotsUI)||o.setPlayerEventTarget(r),null==(s=this.inventoryUI)||s.setPlayerEventTarget(r),null==(u=this.itemDetailsUI)||u.setPlayerEventTarget(r),null==(p=this.damageButton)||p.setPlayerEventTarget(r),null==(y=this.spellButton)||y.setPlayerEventTarget(r));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),o.onShowItemDetails=function(t,e){if(this.player){var n=U.CAN_USE;if(t instanceof E)n=Array.from(this.player.getEquippedEquipments()).map((function(t){t[0];return t[1]})).some((function(e){return t.isSame(e)}))?U.CAN_UNEQUIP:U.CAN_EQUIP;this.itemDetailsUI.show(n,t,e)}},e}(p)).prototype,"playerStatsHUD",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R=e(B.prototype,"equipmentSlotsUI",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),A=e(B.prototype,"inventoryUI",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),C=e(B.prototype,"itemDetailsUI",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=e(B.prototype,"damageButton",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=e(B.prototype,"spellButton",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q=B))||q));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});